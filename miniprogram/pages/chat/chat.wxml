<!--chat.wxml-->
<view class="app-container">
	<scroll-view scroll-with-animation="{{true}}" scroll-y="true">
		<view class="msg-list" scroll-with-animation="{{true}}">
			<block wx:for="{{msgList}}" wx:for-item="x" wx:for-index="i" wx:key="i">
				<view class="msg-list-item">
					<block wx:if="{{x.role === 'user'}}">
						<view class="msg-list-item__left userinfo">
							<view class="img-group">
								<view class="iconfont icon-manual-cs"></view>
							</view>
							<view class="txt-group">
								<text class="txt-msg">{{x.content}}</text>
							</view>
						</view>
					</block>
					<block wx:if="{{x.role === 'assistant'}}">
						<view class="msg-list-item__right aiinfo">
							<view class="img-group">
								<view class="iconfont icon-robot"></view>
							</view>
							<view class="txt-group">
								<text class="txt-msg" user-select="true" user-select="true">{{x.content}}</text>
							</view>
						</view>
					</block>
				</view>
			</block>
		</view>
	</scroll-view>
	<view class="msg-operate">
		<input class="form-control" bindinput="onInputValue" value="{{inputValue}}" placeholder="你想和我聊点什么？" bindconfirm="handleSend"/>
		<button class="{{inputValue === '' ? 'btn-send disabled' : 'btn-send'}}"
		bindtap="handleSend" disabled="{{inputValue === ''}}">
			<!--<view class="iconfont icon-loading" wx:if="{{msgLoading}}"></view>-->
			<view class="iconfont icon-send"></view>
		</button>
	</view>
	<!--<view class="flex-column-center">
		<block wx:if="{{!apisucc}}">
			<button data-event-opts="{{[['tap',[['openpop',['$event']]]]]}}" class="btn" style="margin-bottom:20rpx;width:auto;" bindtap="__e">{{apibut}}</button>
		</block>
		<block wx:if="{{apisucc}}">
			<view class="inpubut">
				<input class="dh-input" type="text" confirm-type="search" placeholder-class="my-neirong-sm" placeholder="描述您的问题" data-event-opts="{{[['confirm',[['sendMsg',['$event']]]],['input',[['__set_model',['','msg','$event',[]]]]]]}}" value="{{msg}}" bindconfirm="__e" bindinput="__e" />
				<button class="btn " disabled="{{msgLoad}}" data-event-opts="{{[['tap',[['sendMsg',['$event']]]]]}}" bindtap="__e">{{sentext}}</button>
			</view>
		</block>
	</view>
	<uni-popup class="vue-ref" vue-id="8dd740cc-1" type="center" data-ref="popup" bind:__l="__l" vue-slots="{{['default']}}">
		<view class="popcls">
			<view class="uni-textarea" style="width:90%;margin:20rpx 20rpx;border:1px solid #000000;">
				<textarea placeholder-style="color:#F76260" placeholder="{{apiadj}}" data-event-opts="{{[['input',[['__set_model',['','api','$event',[]]]]]]}}" value="{{api}}" bindinput="__e"></textarea>
			</view>
			<view style="display:flex;flex-direction:row;">
				<button style="margin:10rpx;" type="primary" data-event-opts="{{[['tap',[['apiset',['$event']]]]]}}" bindtap="__e">确认</button>
				<button data-event-opts="{{[['tap',[['clopop',['$event']]]]]}}" style="margin:10rpx;" bindtap="__e">取消</button>
			</view>
		</view>
	</uni-popup>-->
</view>
